# 🤖 Локальный ИИ Поиск Адресов v2.0

**Полностью автономный браузерный агент** для поиска адресов в Яндексе с локальным компьютерным зрением и анализом. Никаких внешних API не требуется!

## 🚀 Особенности

### 🤖 Полностью автономная работа

-   ✅ **Без внешних API** - все работает локально на вашем компьютере
-   🌐 **Реальный браузер Chrome** для обхода любых блокировок
-   📸 **Автоматические скриншоты** каждого поиска в высоком качестве
-   🔍 **Локальное компьютерное зрение** для анализа изображений
-   📝 **OCR извлечение текста** из скриншотов на русском языке
-   🛡️ **Автоматическое определение капчи** и проблем
-   🎨 **Анализ цветов и структуры** страницы
-   📊 **Умная аналитика** результатов поиска

### 🔧 Технические возможности

-   **OpenCV** для анализа изображений
-   **Tesseract OCR** для извлечения текста
-   **Playwright** для управления браузером
-   **Streamlit** для красивого веб-интерфейса
-   **Pandas & Plotly** для аналитики и графиков

## 📋 Системные требования

-   **Python 3.8+**
-   **RAM:** 4 GB (рекомендуется 8 GB)
-   **Свободное место:** 2 GB (браузер + скриншоты)
-   **ОС:** Windows 10+, macOS 10.14+, Ubuntu 18.04+

## 🛠️ Быстрая установка

### 1. Основные зависимости

```bash
git clone <your-repository>
cd <project-folder>
pip install -r requirements.txt
```

### 2. Браузер Chromium

```bash
playwright install chromium
```

### 3. Tesseract OCR (для извлечения текста)

**Windows:**

-   Скачайте с https://github.com/UB-Mannheim/tesseract/wiki
-   Добавьте в PATH

**Linux:**

```bash
sudo apt-get install tesseract-ocr tesseract-ocr-rus
```

**macOS:**

```bash
brew install tesseract tesseract-lang
```

## 🎯 Запуск

### Веб-приложение

```bash
streamlit run app.py
```

Откроется на http://localhost:8501

### Быстрый тест

```bash
python test_parser.py
```

## 📊 Формат данных

JSON массив с полем `address`:

```json
[
    {
        "accountId": 1001,
        "address": "Москва, улица Тверская, дом 1",
        "buildingType": "Многоквартирный",
        "roomsCount": 2,
        "totalArea": 45.5
    }
]
```

## 🏗️ Структура проекта

```
📁 Локальный ИИ Поиск Адресов/
├── 🚀 app.py                    # Главное Streamlit приложение
├── 📋 requirements.txt          # Зависимости
├── 📖 README.md                # Документация
├── 🧪 test_parser.py           # Быстрый тест
├── 📄 test_data.json           # Примеры данных
├── 📁 utils/
│   ├── 🤖 browser_agent.py     # Локальный браузерный агент
│   ├── 📊 data_processor.py    # Обработка JSON данных
│   ├── 📈 analyzer.py          # Аналитика результатов
│   └── 🎨 display.py           # Красивое отображение
├── 📁 config/
│   └── ⚙️ settings.py          # Настройки (НЕ ИСПОЛЬЗУЕТСЯ)
└── 📁 screenshots/             # 📸 Автоматически создается
```

## 🎯 Как использовать

### 1. Запустите приложение

```bash
streamlit run app.py
```

### 2. Загрузите данные

-   📁 Выберите JSON файл
-   📝 Или вставьте JSON напрямую

### 3. Настройте поиск

-   🔇 **Скрытый режим** - браузер без окна
-   📸 **Скриншоты** - автосохранение изображений
-   📊 **Лимит адресов** - для контроля времени

### 4. Запустите поиск

-   Агент автоматически откроет браузер
-   Найдет каждый адрес в Яндексе
-   Сделает скриншоты
-   Проанализирует результаты

### 5. Изучите результаты

-   🔍 **Поисковая выдача** - как в Яндексе
-   📊 **Таблица** - структурированные данные
-   📸 **Скриншоты** - визуальный анализ
-   📈 **Аналитика** - графики и статистика

## 🔍 Что анализирует ИИ агент

### 📸 Анализ изображений (OpenCV)

-   🟡 **Цвета интерфейса** - определяет элементы Яндекса
-   🔗 **Синие ссылки** - находит результаты поиска
-   📐 **Структура блоков** - подсчитывает области контента
-   🛡️ **Определение капчи** - анализ искажений
-   ☀️ **Тема интерфейса** - светлая/темная

### 📝 Анализ текста (OCR + DOM)

-   🔍 **Количество результатов** - "найдено N результатов"
-   🗺️ **Упоминания карт** - Яндекс.Карты, 2GIS
-   ❌ **Ошибки поиска** - "ничего не найдено"
-   🛡️ **Капча в тексте** - проверки безопасности
-   ✅ **Релевантность** - совпадение слов адреса

### 🏷️ Типы результатов

-   🗺️ **Карты Яндекса** - yandex.ru/maps
-   📍 **2GIS** - 2gis.ru
-   🏠 **Недвижимость** - avito, cian, domclick
-   🏛️ **Госсайты** - rosreestr, gosuslugi
-   📚 **Википедия** - wikipedia
-   🌐 **Обычные сайты** - остальные

## 📈 Аналитика

### 📊 Интерактивные графики

-   🥧 **Круговая диаграмма** доменов
-   📊 **Гистограмма** типов результатов
-   📈 **Рейтинг** топ доменов
-   🎯 **Анализ позиций** по типам

### 🎯 Метрики успешности

-   ✅ **% успешных поисков**
-   📸 **Количество скриншотов**
-   ⚠️ **Список ошибок**
-   📋 **Детальные логи**

## ⚡ Производительность

-   **Скорость:** ~10-15 секунд на адрес
-   **Размер скриншота:** ~2-5 МБ каждый
-   **Память:** ~500 МБ на браузер
-   **Надежность:** Работает с капчами и блокировками

## 🛡️ Безопасность и этика

-   ✅ **Локальная обработка** - данные не покидают ваш компьютер
-   🤖 **Маскировка автоматизации** - выглядит как обычный пользователь
-   ⏱️ **Разумные задержки** - не нагружает серверы
-   📜 **Соблюдение robots.txt** - этичное использование

## ❗ Важные замечания

### ⚠️ Ограничения

-   Яндекс может показывать капчи при интенсивном использовании
-   Селекторы могут измениться - потребуется обновление
-   Большие объемы требуют времени (~15 сек на адрес)

### 💡 Рекомендации

-   Тестируйте на небольших объемах сначала
-   Используйте headless режим для производительности
-   Периодически очищайте папку screenshots
-   Следите за дисковым пространством

## 🆕 Что нового в v2.0

-   🤖 **Полностью локальная работа** без внешних API
-   🔍 **Компьютерное зрение** вместо HTTP-парсинга
-   📸 **Автоматические скриншоты** всех поисков
-   🛡️ **Умное определение капчи** и проблем
-   📊 **Расширенная аналитика** с визуализацией
-   🎨 **Современный интерфейс** с градиентами
-   ⚡ **Оптимизированная архитектура** кода

## 🤝 Поддержка

Если возникли проблемы:

1. **Проверьте зависимости:** `python test_parser.py`
2. **Обновите браузер:** `playwright install chromium --force`
3. **Переустановите OCR:** следуйте инструкции выше
4. **Запустите в visible режиме** для отладки

## 📄 Лицензия

MIT License - используйте свободно в коммерческих и личных проектах.
